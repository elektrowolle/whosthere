<!DOCTYPE html>
<html>
<head>
	<title>{$title}</title>
	<link href="style.css" type="text/css" rel="stylesheet" >
	<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300' rel='stylesheet' type='text/css'>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.min.css" />
	<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.min.js"></script>
</head>

<body>
<h1>{$title}</h1>
<p>{$_welcome}</p>
<h2>{$_arrivals}</h2>
<div class="block">
	<div class="arrival descriptor">{$_arrivals_time}</div>
	<div class="name descriptor">{$_arrivals_name}</div>
	<div class="status descriptor">{$_arrivals_status}</div>
</div>	
{loop="today_arrivals"}
<div class="block">
	<div class="arrival">{$value.time}</div>
	<div class="name">{$value.name}</div>
	<div class="status">{$value.status}</div>
</div>
{/loop}	

<div id="formContainer">
<h2>{$_check_in}</h2>
	<form id="announceForm" action="socket.php?mode=announce" method="post">
		<fieldset>
			<legend>Who are you?</legend>
			<input name="name" type="text" required autofocus>
			<input name="announce" type="submit" value="I'd love to come">
		</fieldset>
	</form>
</div>

<h2>{$_former_arrivals}</h2>
<div class="block">
	<div class="arrival descriptor">{$_arrivals_time}</div>
	<div class="name descriptor">{$_arrivals_name}</div>
	<div class="status descriptor">{$_arrivals_status}</div>
</div>

{loop="former_arrivals"}
<div class="block">
	<div class="arrival">{$value.time}</div>
	<div class="name">{$value.name}</div>
	<div class="status">{$value.status}</div>
</div>
{/loop}

<script type="text/javascript">
	function update () {
		// body...
	}

	$( "#announceForm" ).submit(function( event ) {
 
	  // Stop form from submitting normally
	  event.preventDefault();
	 
	  // Get some values from elements on the page:
	  var $form = $( this ),
	    name = $form.find( "input[name='name']" ).val(),
	    url  = $form.attr( "action" );
	 
	  // Send the data using post
	  var posting = $.post( url, { name: name } );
	 
	  // Put the results in a div
	  posting.done(function( data ) {
	    var content = $( data ).find( "#formContainer" );
	    $( "#formContainer" ).empty().append( content );
	  });
	});	

	setInterval(update, 5000);
</script>
</body>
</html>
